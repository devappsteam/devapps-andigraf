{"version":3,"file":"/assets/js/associate.js","mappings":"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","sources":["webpack:///./resources/assets/js/pages/associate.js"],"sourcesContent":["\"user strict\";\n\n(function ($) {\n\n    const fields = [\n        'corporate_name',\n        'fantasy_name',\n        'postcode',\n        'address',\n        'number',\n        'district',\n        'city',\n        'state'\n    ];\n\n    const physical_fields = [\n        'personal_document',\n        'first_name',\n        'last_name',\n        'birth_date'\n    ];\n\n\n    function before_load_cnpj() {\n        for (field of fields) {\n            $(`#${field}`).val(null).prop('readonly', true);\n        }\n    }\n\n    function after_load_cnpj() {\n        for (field of fields) {\n            $(`#${field}`).prop('readonly', false);\n        }\n    }\n\n    $(function () {\n        $('[name=\"type\"]').on('change', function (e) {\n            if ($(this).val() == 'physical') {\n                $('.corporate').hide();\n                $('.personal').show();\n                personal_required(true);\n                corporate_required(false);\n            } else {\n                $('.corporate').show();\n                $('.personal').hide();\n                personal_required(false);\n                corporate_required(true);\n            }\n        });\n\n        $('#find_cnpj').on('click', function (e) {\n            find_cnpj($('#corporate_document').val().replace(/\\D/g, ''));\n        });\n\n        var SPMaskBehavior = function (val) {\n            return val.replace(/\\D/g, '').length === 11 ? '(00) 00000-0000' : '(00) 0000-00009';\n        },\n            spOptions = {\n                onKeyPress: function (val, e, field, options) {\n                    field.mask(SPMaskBehavior.apply({}, arguments), options);\n                }\n            };\n\n        $('#phone, #whatsapp, #responsible_phone').mask(SPMaskBehavior, spOptions);\n\n        $('#postcode').on('keyup', delay(function (e) {\n            if ($(this).val().length == 9) {\n                find_postcode($(this).val().replace(/\\D/g, ''));\n            }\n        }, 500));\n\n        $('.delete').on('click', function(e){\n            e.preventDefault();\n            const button = $(this);\n            Swal.fire({\n                icon: 'question',\n                title: 'Deseja realmente excluir este registro?',\n                showCancelButton: true,\n                confirmButtonText: 'Sim',\n                cancelButtonText: `Não`,\n              }).then((result) => {\n                if (result.isConfirmed) {\n                    $('#form_delete').find('#associate_delete').val(button.data('delete'));\n                    $('#form_delete').submit();\n                }\n              })\n        });\n\n        $('#btn_filter').on('click', function(e){\n            e.preventDefault();\n            $('#form_filter').slideToggle(300);\n        });\n\n    });\n\n\n\n    function delay(callback, ms) {\n        var timer = 0;\n        return function () {\n            var context = this, args = arguments;\n            clearTimeout(timer);\n            timer = setTimeout(function () {\n                callback.apply(context, args);\n            }, ms || 0);\n        };\n    }\n\n    function personal_required(required = false) {\n        $('#personal_document').prop('required', required).val(null);\n        $('#first_name').prop('required', required).val(null);\n        $('#last_name').prop('required', required).val(null);\n        $('#birth_date').prop('required', required).val(null);\n    }\n\n    function corporate_required(required = false) {\n        $('#corporate_document').prop('required', required).val(null);\n        $('#corporate_name').prop('required', required).val(null);\n        $('#fantasy_name').prop('required', required).val(null);\n        $('#responsible_first_name').prop('required', required).val(null);\n        $('#responsible_last_name').prop('required', required).val(null);\n        $('#responsible_phone').prop('required', required).val(null);\n        $('#responsible_email').prop('required', required).val(null);\n        $('#responsible_job').prop('required', required).val(null);\n    }\n\n    function apply_data_by_cnpj(data) {\n        $('#corporate_name').val(data.nome);\n        $('#fantasy_name').val(data.fantasia);\n        $('#phone').val(data.telefone);\n        $('#email').val(data.email);\n        $('#postcode').val(data.cep.replace('.', ''));\n        $('#address').val(data.logradouro);\n        $('#number').val(data.numero);\n        $('#complement').val(data.complemento);\n        $('#district').val(data.bairro);\n        $('#city').val(data.municipio);\n        $('#state').val(data.uf);\n    }\n\n    function find_cnpj(cnpj) {\n        var validatecnpj = /^[0-9]{14}$/;\n        if (validatecnpj.test(cnpj)) {\n            if (validatecnpj.test(cnpj)) {\n\n                $.ajax({\n                    url: \"https://www.receitaws.com.br/v1/cnpj/\" + cnpj + \"/?callback=?\",\n                    type: \"GET\",\n                    dataType: \"JSON\",\n                    beforeSend: function () {\n                        before_load_cnpj();\n                    },\n                    success(response) {\n                        if (response.status == \"OK\") {\n                            apply_data_by_cnpj(response);\n                        }\n                    }\n                }).done(function () {\n                    after_load_cnpj();\n                });\n            }\n        }\n    }\n\n    function postcode_clear() {\n        $('#postcode').val(null);\n        $('#address').val(null);\n        $('#number').val(null);\n        $('#complement').val(null);\n        $('#district').val(null);\n        $('#city').val(null);\n        $('#state').val(null);\n    }\n\n    function find_postcode(postcode) {\n        //Verifica se campo cep possui valor informado.\n        if (postcode != \"\") {\n\n            //Expressão regular para validar o CEP.\n            var postcode_validate = /^[0-9]{8}$/;\n\n            //Valida o formato do CEP.\n            if (postcode_validate.test(postcode)) {\n\n                $('#address').val('...');\n                $('#district').val('...');\n                $('#city').val('...');\n                $('#state').val('...');\n\n                //Consulta o webservice viacep.com.br/\n                $.getJSON(\"https://viacep.com.br/ws/\" + postcode + \"/json/?callback=?\", function (dados) {\n\n                    if (!(\"erro\" in dados)) {\n                        //Atualiza os campos com os valores da consulta.\n\n                        $('#address').val(dados.logradouro);\n                        $('#district').val(dados.bairro);\n                        $('#city').val(dados.localidade);\n                        $('#state').val(dados.uf);\n\n                    } //end if.\n                    else {\n                        //CEP pesquisado não foi encontrado.\n                        postcode_clear();\n                        alert(\"CEP não encontrado.\");\n                    }\n                });\n            } //end if.\n            else {\n                //cep é inválido.\n                postcode_clear();\n                alert(\"Formato de CEP inválido.\");\n            }\n        } //end if.\n        else {\n            //cep sem valor, limpa formulário.\n            postcode_clear();\n        }\n    }\n\n})(jQuery);\n"],"names":["$","fields","personal_required","required","arguments","length","undefined","prop","val","corporate_required","postcode_clear","on","e","this","hide","show","cnpj","validatecnpj","replace","test","ajax","url","type","dataType","beforeSend","_i","_fields","field","concat","before_load_cnpj","success","response","data","status","nome","fantasia","telefone","email","cep","logradouro","numero","complemento","bairro","municipio","uf","done","_i2","_fields2","after_load_cnpj","callback","ms","timer","SPMaskBehavior","spOptions","onKeyPress","options","mask","apply","postcode","getJSON","dados","alert","localidade","context","args","clearTimeout","setTimeout","preventDefault","button","Swal","fire","icon","title","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","find","submit","slideToggle","jQuery"],"sourceRoot":""}